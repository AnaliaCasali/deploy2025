import{a as D}from"./chunk-4ATTAGCL.js";import{b as j}from"./chunk-EITPQ4QS.js";import{l as I,m as k,n as F,o as T}from"./chunk-4DCJT2OD.js";import{Aa as r,Ab as E,Ba as p,Cb as C,Db as L,Pa as d,Ra as m,W as g,Ya as o,Za as a,_a as b,bb as _,da as x,ea as v,eb as N,fa as h,fb as f,lb as y,mb as s,nb as u,ob as S,vb as w}from"./chunk-X5N6KVFF.js";function V(i,n){if(i&1){let c=_();o(0,"button",12),N("click",function(){x(c);let e=f().$implicit,l=f(2);return v(l.marcarComoLeida(e.id))}),o(1,"span",13),h(),o(2,"svg",14),b(3,"path",15),a()()()}}function M(i,n){if(i&1&&(o(0,"li",6)(1,"div",7)(2,"div")(3,"h3",8),s(4),a(),o(5,"p",9),s(6),E(7,"date"),a(),o(8,"p"),s(9),a()(),o(10,"div",10),d(11,V,4,0,"button",11),a()()()),i&2){let c=n.$implicit;r(4),u(c.mensaje),r(2),u(C(7,4,c.fecha,"short")),r(3),S("Le\xEDda: ",c.leida?"S\xED":"No",""),r(2),m("ngIf",!c.leida)}}function A(i,n){if(i&1&&(o(0,"div")(1,"ul",4),d(2,M,12,7,"li",5),a()()),i&2){let c=f();r(2),m("ngForOf",c.notificaciones)}}function B(i,n){i&1&&(o(0,"p",16),s(1,"No tienes notificaciones nuevas."),a())}var q=(()=>{let n=class n{constructor(t,e){this.notificacionService=t,this.auth=e,this.notificaciones=[],this.dni=""}ngOnInit(){this.auth.isAuthenticated()&&(this.dni=String(localStorage.getItem("dni")),this.cargarNotificacionesNoLeidas())}cargarNotificacionesNoLeidas(){this.notificacionService.obtenerNoLeidas(this.dni).subscribe(t=>{this.notificaciones=t,console.log(this.notificaciones)},t=>{console.error("Error al cargar las notificaciones",t)})}marcarComoLeida(t){this.notificacionService.marcarComoLeida(t).subscribe(()=>{let e=this.notificaciones.find(l=>l.id===t);e&&(e.leida=!0)},e=>{console.error("Error al marcar la notificaci\xF3n como le\xEDda",e)})}eliminarNotificacion(t){this.notificacionService.eliminarNotificacion(t).subscribe(()=>{this.cargarNotificacionesNoLeidas()},e=>{console.error("Error al eliminar la notificaci\xF3n",e)})}};n.\u0275fac=function(e){return new(e||n)(p(D),p(j))},n.\u0275cmp=g({type:n,selectors:[["app-notificaciones-listado"]],standalone:!0,features:[w],decls:6,vars:2,consts:[["noNotificaciones",""],[1,"container","mx-auto","p-6"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"divide-y","divide-gray-200"],["class","py-4 px-6 bg-white shadow rounded-lg mb-4",4,"ngFor","ngForOf"],[1,"py-4","px-6","bg-white","shadow","rounded-lg","mb-4"],[1,"flex","justify-between","items-center"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500"],[1,"flex","space-x-2"],["class",`relative middle none font-sans font-medium text-center uppercase
                transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none
                w-10 h-10 rounded-lg text-xs
                text-blue-900 hover:bg-blue-gray-500/10
                active:bg-blue-gray-500/30`,3,"click",4,"ngIf"],[1,"relative","middle","none","font-sans","font-medium","text-center","uppercase","transition-all","disabled:opacity-50","disabled:shadow-none","disabled:pointer-events-none","w-10","h-10","rounded-lg","text-xs","text-blue-900","hover:bg-blue-gray-500/10","active:bg-blue-gray-500/30",3,"click"],[1,"absolute","top-1/4","left-1/2","transform","-translate-y-1/2","-translate-x-1/2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","strokeWidth","{1.5}","stroke","currentColor",1,"h-6","w-6","text-blue-900"],["strokeLinecap","round","strokeLinejoin","round","d","m4.5 12.75 6 6 9-13.5"],[1,"text-gray-500"]],template:function(e,l){if(e&1&&(o(0,"div",1)(1,"h2",2),s(2,"Notificaciones"),a(),d(3,A,3,1,"div",3)(4,B,2,0,"ng-template",null,0,L),a()),e&2){let O=y(5);r(3),m("ngIf",l.notificaciones.length>0)("ngIfElse",O)}},dependencies:[T,I,k,F]});let i=n;return i})();export{q as a};
