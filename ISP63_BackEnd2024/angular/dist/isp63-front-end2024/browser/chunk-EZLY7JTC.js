import{a as N}from"./chunk-3XUV45YM.js";import{a as U}from"./chunk-UBAW45YS.js";import"./chunk-CB6FNCUI.js";import{a as D}from"./chunk-SJWRDQVH.js";import{a as b,b as F}from"./chunk-5AS2EY2S.js";import{a as T,c as j,l as k}from"./chunk-5KY6YBJG.js";import{l as I,m as L,o as A}from"./chunk-4DCJT2OD.js";import{$a as _,Aa as s,Ba as x,M as O,Pa as u,R as C,Ra as p,W as w,Ya as e,Za as t,_a as g,ab as M,eb as h,k as P,mb as i,nb as c,ob as S,v,vb as E}from"./chunk-X5N6KVFF.js";import"./chunk-QMQTSFHS.js";import"./chunk-FK6H3RFT.js";import{e as B}from"./chunk-EQDQRRRY.js";var y=B(D());var z=(()=>{let o=class o{constructor(n,a){this.http=n,this.authService=a,this.apiUrl=b.apiUrl+"api/inscripcionmesasexamen/lista-inscriptos",this.apiUrlUser=b.apiUrl+"api/usuario/",this.apiUrlLoc=b.apiUrl+"auth/localidades"}getHeaders(){let n=new T;if(this.authService.isAuthenticated()){let a=localStorage.getItem("authToken");n=n.set("Authorization",`Bearer ${a}`)}return n}ObtenerDatos(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(v(this.handleError))}obtenerLocalidades(){return this.http.get(this.apiUrlLoc).pipe(v(this.handleError))}obtenerTodosAlumnos(){let n=this.getHeaders();return this.http.get(`${this.apiUrlUser}todosAlumnos`,{headers:n}).pipe(v(this.handleError))}handleError(n){return console.error("A ocurrido un error",n),P(n.message||"Server Error")}};o.\u0275fac=function(a){return new(a||o)(C(j),C(F))},o.\u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"});let l=o;return l})();function K(l,o){if(l&1&&(e(0,"option",34),i(1),t()),l&2){let d=o.$implicit;p("value",d.id),s(),S(" ",d.carrera," ")}}function V(l,o){if(l&1&&(e(0,"option",34),i(1),t()),l&2){let d=o.$implicit;p("value",d.id),s(),S(" ",d.localidad," ")}}function q(l,o){l&1&&(e(0,"tr")(1,"td",35),i(2,"No hay alumnos"),t()())}function G(l,o){if(l&1&&(_(0),e(1,"tr")(2,"td"),i(3),t(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t(),e(10,"td"),i(11),t(),e(12,"td",36),i(13),t()(),M()),l&2){let d=o.$implicit;s(3),c(d.apellidoyapellido),s(2),c(d.dni),s(2),c(d.localidad),s(2),c(d.carrera),s(2),c(d.telefono),s(2),c(d.email||"No registrado")}}function R(l,o){if(l&1&&(_(0),e(1,"div",37)(2,"div",38),i(3),t(),e(4,"div",39),i(5),t(),e(6,"div",40),i(7),t(),e(8,"div",41),i(9),t(),e(10,"div",39),i(11),t(),e(12,"div",42),i(13),t()(),M()),l&2){let d=o.$implicit;s(3),c(d.apellidoyapellido),s(2),c(d.dni),s(2),c(d.localidad),s(2),c(d.carrera),s(2),c(d.telefono),s(2),c(d.email||"No registrado")}}function J(l,o){l&1&&(e(0,"div",43),i(1," No hay inscriptos "),t())}var ae=(()=>{let o=class o{constructor(n,a,r,m){this.aPdfService=n,this.infoCarrerasService=a,this.infoAlumnosService=r,this.router=m,this.filteredInscripMesas=[],this.datosAlumno=[],this.selectedCarrera=null,this.selectedLocalidad=null,this.carrerasFiltradas=[]}ngOnInit(){this.infoAlumnosService.obtenerTodosAlumnos().subscribe(n=>{this.filteredInscripMesas=n,this.datosAlumno=n,console.log(this.filteredInscripMesas)}),this.infoAlumnosService.obtenerLocalidades().subscribe(n=>{this.localidades=n}),this.infoCarrerasService.ObtenerDatos().subscribe(n=>{this.carreras=n})}aPdf(n,a){let r=document.getElementById(a);r&&(r.style.display="block");try{this.aPdfService.GenerarPdf(n,a),y.default.fire({icon:"success",title:"\xC9xito",text:"Se realiz\xF3 la descarga correctamente.",confirmButtonText:"OK"}),r&&(r.style.display="none")}catch{r&&(r.style.display="none"),y.default.fire({icon:"error",title:"Error",text:"Hubo un problema. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"})}}filtrarPorLocalidad(n){let a=Number(n.target.value);this.selectedLocalidad=a===0?null:Number(a),this.localimpr=this.localidades?.find(r=>r.id===this.selectedLocalidad)?.localidad||"Todas las localidades",this.aplicarFiltros()}filtrarPorCarrera(n){this.selectedCarrera=Number(n.target.value),this.carreraimpr=this.carreras?.find(r=>r.id===this.selectedCarrera)?.carrera||"Todas las carreras";let a=Number(n.target.value);this.selectedCarrera=a===0?null:Number(a),this.aplicarFiltros()}buscarAlumno(n){let a=n.target.value.toLowerCase(),r=this.datosAlumno?.filter(m=>this.removeAccents(m.apellidoyapellido.toLowerCase()).includes(a)||m.carrera.toString().includes(a)||this.removeAccents(m.dni.toLowerCase()).includes(a)||m.dni.toString().includes(a)||this.removeAccents(m.localidad.toLowerCase()).includes(a)||this.removeAccents(m.email.toLowerCase()).includes(a))??[];this.filteredInscripMesas=r}removeAccents(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}aplicarFiltros(){this.filteredInscripMesas=[...this.datosAlumno],this.selectedLocalidad&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(n=>n.idLocalidad===this.selectedLocalidad)),this.selectedCarrera&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(n=>n.idCarrera===this.selectedCarrera))}};o.\u0275fac=function(a){return new(a||o)(x(U),x(N),x(z),x(k))},o.\u0275cmp=w({type:o,selectors:[["app-lista-alumnos"]],standalone:!0,features:[E],decls:83,vars:8,consts:[[1,"body","container-fluid"],[1,"filtros","row","mb-3","justify-content-center","no-print"],[1,"col-md-12","d-md-flex","justify-content-center","no-print"],[1,"col-md","col-12","row","justify-content-md-start","justify-content-center"],[1,"col-md-4","col-10","my-3","mx-2"],[1,"input-group"],["type","text","placeholder","Buscar",1,"form-control",3,"input"],["routerLink","",1,"iconBusc","input-group-text"],[1,"fas","fa-search"],[1,"col-md","col-12","row","justify-content-md-end","justify-content-center"],[1,"col-md-4","col-5","mx-2","my-3"],["id","selectCarrera",1,"form-select","auto",3,"change"],["disabled","","selected","","hidden",""],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["id","tablaAlumInsc",1,"table","table-hover","text-center","align-middle"],["colspan","6",1,"table-title","text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-end","no-print"],[1,"d-inline-flex"],["id","canvasElement",2,"display","none"],[1,"btn","btn-primary","btn-sm","mx-5",3,"click"],["id","contenedor",1,"flex","justify-center","items-center","h-screen","mx-5",2,"display","none"],[1,"bg-white","p-4","rounded-lg","w-full","flex","flex-col","justify-center"],[1,"text-xl","font-semibold","mb-4","text-center"],[1,"flex","justify-center","mx-4"],[1,"my-2","mx-4"],[1,"grid","grid-cols-6","gap-4","border-b","border-gray-400","pb-2"],[1,"font-bold","text-left","flex","items-center","max-w-[150px]","text-sm"],[1,"font-bold","text-left","flex","items-center","max-w-[100px]","text-sm"],[1,"font-bold","text-left","flex","items-center","max-w-[200px]","text-sm"],["class","text-center text-gray-500 py-2",4,"ngIf"],[3,"value"],["colspan","6",1,"text-center"],[1,"max-w-[100px]","break-all"],[1,"grid","grid-cols-6","gap-4","border-b","border-gray-300","py-2"],[1,"text-left","flex","items-center","max-w-[150px]","mx-1","text-sm"],[1,"text-left","flex","items-center","max-w-[100px]","text-sm"],[1,"text-left","flex","items-center","max-w-[150px]","text-sm"],[1,"text-left","flex","items-center","max-w-[200px]","text-sm"],[1,"text-left","flex","items-center","max-w-[100px]","break-all","text-sm"],[1,"text-center","text-gray-500","py-2"]],template:function(a,r){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),h("input",function(f){return r.buscarAlumno(f)}),t(),e(7,"a",7)(8,"span"),g(9,"i",8),t()()()()(),e(10,"div",9)(11,"div",10)(12,"select",11),h("change",function(f){return r.filtrarPorCarrera(f)}),e(13,"option",12),i(14,"Carrera"),t(),e(15,"option",13),i(16,"Todas las carreras"),t(),u(17,K,2,2,"option",14),t()(),e(18,"div",10)(19,"select",11),h("change",function(f){return r.filtrarPorLocalidad(f)}),e(20,"option",12),i(21,"Localidad"),t(),e(22,"option",13),i(23,"Todas las Localidades"),t(),u(24,V,2,2,"option",14),t()()()()(),e(25,"div",15)(26,"table",16)(27,"thead")(28,"tr")(29,"th",17),i(30," Listado de Alumnos "),t()(),e(31,"tr")(32,"th"),i(33,"Nombre"),t(),e(34,"th"),i(35,"DNI"),t(),e(36,"th"),i(37,"Localidad"),t(),e(38,"th"),i(39,"Carrera"),t(),e(40,"th"),i(41,"Telefono"),t(),e(42,"th"),i(43,"Correo"),t()()(),e(44,"tbody"),u(45,q,3,0,"tr",18)(46,G,14,6,"ng-container",19),e(47,"tr")(48,"td",20)(49,"div",21),g(50,"canvas",22),e(51,"button",23),h("click",function(){return r.aPdf("canvasElement","contenedor")}),i(52,"Imprimir Listado"),t()()()()()()()(),e(53,"div",24)(54,"div",25)(55,"h3",26),i(56,"Informaci\xF3n de Alumnos"),t(),g(57,"hr"),e(58,"div",27)(59,"p",28),i(60,"Carrera: "),e(61,"b"),i(62),t()(),e(63,"p",28),i(64,"Localidad: "),e(65,"b"),i(66),t()()(),g(67,"hr"),e(68,"div",29)(69,"div",30),i(70,"Nombre y Apellido"),t(),e(71,"div",31),i(72,"D.N.I"),t(),e(73,"div",30),i(74,"Localidad"),t(),e(75,"div",32),i(76,"Carrera"),t(),e(77,"div",31),i(78,"Tel\xE9fono"),t(),e(79,"div",31),i(80,"Email"),t()(),u(81,R,14,6,"ng-container",19)(82,J,2,0,"div",33),t()()),a&2&&(s(17),p("ngForOf",r.carreras),s(7),p("ngForOf",r.localidades),s(21),p("ngIf",r.filteredInscripMesas.length===0),s(),p("ngForOf",r.filteredInscripMesas),s(16),c(r.carreraimpr?r.carreraimpr:"Todas las carreras"),s(4),c(r.localimpr?r.localimpr:"Todas las localidades"),s(15),p("ngForOf",r.filteredInscripMesas),s(),p("ngIf",r.filteredInscripMesas.length===0))},dependencies:[A,I,L],styles:["header[_ngcontent-%COMP%]{background-color:transparent;padding:15px}h2[_ngcontent-%COMP%]{font-weight:700;color:#4d44b5;font-size:25px}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;overflow:hidden;padding-left:5px}th[_ngcontent-%COMP%]{background-color:#e7e7ff;color:#4d44b5;text-align:left;vertical-align:middle}td[_ngcontent-%COMP%], .ttlcarrera[_ngcontent-%COMP%], .infcarrera[_ngcontent-%COMP%]{vertical-align:middle;max-width:180px!important;text-align:left;min-width:50px;margin:8px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.fotoPerfil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:8px}.fotoPerfil[_ngcontent-%COMP%]{height:50px;width:50px;margin-left:8px}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#4d44b5;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#4d44b5;border-color:#4d44b5}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto;display:flex;border-radius:10px;background-color:#ffffffab;justify-content:center;align-items:center}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%], .perfilUser[_ngcontent-%COMP%]{cursor:pointer;color:#555353;text-decoration:none}.perfilUser[_ngcontent-%COMP%]{padding:5px;align-items:center;margin-left:5px}.opcFiltro[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;text-overflow:ellipsis;background-color:transparent}.form-select[_ngcontent-%COMP%]{width:100%;font-size:14px;padding-right:30px;border-radius:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.form-select[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:20px}.input-group[_ngcontent-%COMP%]{background-color:#fff}.copy-alert[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%);z-index:1050;max-width:300px;padding:15px;border-radius:5px;box-shadow:0 2px 5px #0008;background-color:#bae08d;text-align:center}.table-title[_ngcontent-%COMP%]{padding:7px;text-align:left;font-size:17px;font-weight:400;color:#fff;background-color:#4d44b5}.checkbox[_ngcontent-%COMP%]{width:12px;height:12px;transform:scale(1.5)}.infcarrera[_ngcontent-%COMP%]{max-width:180px;text-overflow:ellipsis;overflow:hidden}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{padding:10px;border-radius:5px;width:100%}.btnAcepInsc[_ngcontent-%COMP%]{text-align:right}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;width:auto;min-width:80px}@media print{.no-print[_ngcontent-%COMP%]{display:none}}@media (max-width: 840px){header[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;align-items:flex-start}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-top:60px;margin-left:10px}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%]{font-size:10px;margin:3px}.fotoPerfil[_ngcontent-%COMP%]{width:25px;height:25px;margin-left:5px}.perfilUser[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.avatar[_ngcontent-%COMP%]{justify-content:center;width:35px;height:35px;border-radius:50%;margin:10px}}"]});let l=o;return l})();export{ae as ListaAlumnosComponent};
