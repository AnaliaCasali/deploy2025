import{a as J}from"./chunk-CBJUJGLL.js";import{a as Y}from"./chunk-GW2W74OV.js";import{a as q}from"./chunk-NLUXFCPZ.js";import{a as X}from"./chunk-STC2FLOC.js";import{a as $}from"./chunk-VTXHYF7I.js";import"./chunk-4ATTAGCL.js";import{d as W,g as R,m as U,n as H,o as K,x as G}from"./chunk-WZ63J2F5.js";import{a as ee}from"./chunk-SJWRDQVH.js";import"./chunk-EITPQ4QS.js";import{l as D,m as N}from"./chunk-5KY6YBJG.js";import{l as j,m as z,o as B}from"./chunk-4DCJT2OD.js";import{Aa as s,Ba as C,Pa as _,Ra as m,Ta as L,Ua as F,Va as I,W as S,Wa as k,Xa as A,Ya as t,Za as i,_a as p,bb as E,da as h,ea as x,eb as g,fb as u,hb as T,mb as l,nb as b,ob as M,pb as w,rb as v,sb as P,tb as O,vb as V}from"./chunk-X5N6KVFF.js";import"./chunk-QMQTSFHS.js";import"./chunk-Q3SVVCBG.js";import{e as Z}from"./chunk-EQDQRRRY.js";var y=Z(ee());function te(r,c){if(r&1&&(t(0,"option",34),l(1),i()),r&2){let o=c.$implicit;m("value",o.id),s(),M(" ",o.carrera," ")}}function ne(r,c){if(r&1&&(t(0,"option",34),l(1),i()),r&2){let o=c.$implicit;m("value",o.value),s(),b(o.label)}}function ie(r,c){r&1&&(t(0,"option",43),l(1,"Llamado"),i()),r&2&&m("ngValue",null)}function ae(r,c){r&1&&(t(0,"option",43),l(1,"Carrera"),i()),r&2&&m("ngValue",null)}function oe(r,c){if(r&1&&(t(0,"option",34),l(1),i()),r&2){let o=c.$implicit;m("value",o.id),s(),M(" ",o.carrera," ")}}function re(r,c){r&1&&(t(0,"option",43),l(1,"A\xF1o"),i()),r&2&&m("ngValue",null)}function le(r,c){if(r&1&&(t(0,"option",34),l(1),i()),r&2){let o=c.$implicit;m("value",o.value),s(),b(o.label)}}function se(r,c){if(r&1){let o=E();t(0,"div",23)(1,"div",35)(2,"select",36),O("ngModelChange",function(n){h(o);let a=u();return P(a.selectedLlamado,n)||(a.selectedLlamado=n),x(n)}),g("change",function(n){h(o);let a=u();return x(a.filtrarPorLlamado(n))}),_(3,ie,2,1,"option",37),t(4,"option",14),l(5,"1\xB0 Llamado"),i(),t(6,"option",15),l(7,"2\xB0 Llamado"),i(),t(8,"option",16),l(9,"Llamado \xFAnico"),i()()(),t(10,"div",38)(11,"select",39),O("ngModelChange",function(n){h(o);let a=u();return P(a.selectedCarrera,n)||(a.selectedCarrera=n),x(n)}),g("change",function(n){h(o);let a=u();return x(a.filtrarPorCarrera(n))}),_(12,ae,2,1,"option",37)(13,oe,2,2,"option",18),i()(),t(14,"div",38)(15,"select",40),O("ngModelChange",function(n){h(o);let a=u();return P(a.selectedAnio,n)||(a.selectedAnio=n),x(n)}),g("change",function(n){h(o);let a=u();return x(a.filtrarPorAnio(n))}),_(16,re,2,1,"option",37)(17,le,2,2,"option",18),i()(),t(18,"div",41)(19,"div",42),p(20,"canvas",20),t(21,"button",21),g("click",function(){h(o);let n=u();return x(n.aPdf("canvasElement","contenedor"))}),l(22,"Descragar PDF "),p(23,"i",22),i()()()()}if(r&2){let o=u();s(2),v("ngModel",o.selectedLlamado),s(),m("ngIf",!o.selectedLlamado),s(8),v("ngModel",o.selectedCarrera),s(),m("ngIf",!o.selectedCarrera),s(),m("ngForOf",o.carreras),s(2),v("ngModel",o.selectedAnio),s(),m("ngIf",!o.selectedAnio),s(),m("ngForOf",o.aniosDisponibles)}}function ce(r,c){r&1&&(t(0,"div",44),p(1,"br"),t(2,"p"),l(3,"No hay mesas disponibles"),i(),p(4,"br"),i())}function de(r,c){if(r&1){let o=E();t(0,"div",45),p(1,"div",46),t(2,"div",47)(3,"div",48)(4,"h4",49),l(5),i(),t(6,"p"),l(7),i()(),t(8,"div",50)(9,"div",51)(10,"div",52)(11,"p",53),p(12,"i",54),l(13),i()(),t(14,"p",55)(15,"b"),l(16,"Tribunal:"),i(),l(17),i()()(),t(18,"div",56)(19,"div",57)(20,"button",58),p(21,"i",59),i(),t(22,"button",60),g("click",function(){let n=h(o).$implicit,a=u();return x(a.eliminarMesaExamen(n.id))}),p(23,"i",61),i()()()()()}if(r&2){let o=c.$implicit,e=u();L(e.getCardClass(o.idCarrera)),s(5),b(o.asignatura),s(2),w("",o.anio,"\xB0 A\xF1o - ",o.carrera,""),s(6),w(" ",o.llamado," Llamado ",o.fechayHora,""),s(4),M(" ",o.tribunal,""),s(3),T("routerLink","/agregarmesaexamen/",o.id,"")}}function me(r,c){if(r&1&&(t(0,"tr")(1,"td",32),l(2),i(),t(3,"td",62),l(4),i(),t(5,"td",32)(6,"div"),l(7),i(),t(8,"div")(9,"B"),l(10),i()()(),t(11,"td",32),l(12),i()()),r&2){let o=c.$implicit;s(2),M("",o.anio,"\xB0"),s(2),b(o.asignatura),s(3),M("Llamado: ",o.llamado,""),s(3),b(o.fechayHora),s(2),b(o.tribunal)}}var Oe=(()=>{let c=class c{constructor(e,n,a,d,f,Q){this.infoMateriasService=e,this.infoCarrerasService=n,this.infoLlamadosService=a,this.mesaExamenServiceService=d,this.aPdfService=f,this.router=Q,this.materias=[],this.selectedLlamado=null,this.selectedCarrera=null,this.selectedAnio=null,this.selectedMateria=null,this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"},{value:4,label:"4\xB0 a\xF1o"}],this.asignaturasFiltradas=[],this.carrerasFiltradas=[],this.showFilters=!1}ngOnInit(){this.infoLlamadosService.ObtenerDatos().subscribe(e=>{this.mesas=e,this.mesasFiltradas=e,console.log(this.mesas)}),this.infoCarrerasService.ObtenerDatos().subscribe(e=>{this.carreras=e,console.log(this.carreras)})}getCardClass(e){switch(e){case 1:return"highlight-informatica";case 2:return"highlight-primaria";case 3:return"highlight-lengua";case 4:return"highlight-mantInd";case 5:return"highlight-biolog";default:return"highlight-default"}}onDelete(e){console.log(`Eliminando la mesa: ${e.materia}`)}buscarMesa(e){let n=e.target.value.toLowerCase(),a=this.mesas?.filter(d=>this.removeAccents(d.asignatura.toLowerCase()).includes(n)||this.removeAccents(d.carrera.toLowerCase()).includes(n)||this.removeAccents(d.fechayHora.toLowerCase()).includes(n)||d.fechayHora.toString().includes(n)||this.removeAccents(d.tribunal.toLowerCase()).includes(n)||this.removeAccents(d.llamado.toLowerCase()).includes(n))??[];this.mesasFiltradas=a}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}normalizeString(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}obtenerMaterias(){this.selectedCarrera!==null&&this.selectedAnio!==null&&this.selectedAnio!==0?this.infoMateriasService.obtenerAsigAnioCarrera(this.selectedCarrera,this.selectedAnio).subscribe(e=>{this.materias=e.map(n=>({id:n.id,nombre:n.nombre})),console.log("Materias obtenidas:",this.materias)},e=>{console.error("Error al obtener las materias:",e)}):console.warn("Por favor selecciona una carrera y un a\xF1o v\xE1lido.")}filtrarPorLlamado(e){this.selectedLlamado=e.target.value,this.selectedCarrera,this.selectedCarrera=null,this.selectedAnio=null;let n=document.getElementById("selectCarrera");n.selectedIndex=0;let a=document.getElementById("selectA\xF1o");a.selectedIndex=0,this.aplicarFiltros(),console.log(this.selectedLlamado)}filtrarPorAnio(e){this.selectedAnio=Number(e.target.value),this.aplicarFiltros()}filtrarPorCarrera(e){this.selectedCarrera=Number(e.target.value),this.selectedAnio=null;let n=document.getElementById("selectA\xF1o");n.selectedIndex=0;let a=this.carreras?.find(d=>d.id===this.selectedCarrera);switch(this.carreraXid=a?a.carrera:"",this.selectedCarrera){case 1:this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"}];break;default:this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"},{value:4,label:"4\xB0 a\xF1o"}];break}this.aplicarFiltros()}aplicarFiltros(){this.mesasFiltradas=[...this.mesas],this.selectedLlamado&&(this.mesasFiltradas=this.mesasFiltradas.filter(e=>e.llamado===this.selectedLlamado)),this.selectedCarrera&&(this.mesasFiltradas=this.mesasFiltradas.filter(e=>(console.log("Comparando mesa carrera ID:",e.idCarrera,"con",this.selectedCarrera),e.idCarrera===this.selectedCarrera))),this.selectedAnio&&(this.mesasFiltradas=this.mesasFiltradas.filter(e=>e.anio===this.selectedAnio))}toggleFilters(){this.showFilters=!this.showFilters}editarMesa(e){this.router.navigate(["/agregarmesaexamen/:id",e]),console.log("Editar mesa con ID:",e)}eliminarMesaExamen(e){this.mesaExamenServiceService.deleteMesaExamen(e).subscribe(n=>{console.log("Mesa de examen eliminada:",n)},n=>{console.error("Error al eliminar la mesa de examen:",n)})}aPdf(e,n){if(!this.selectedCarrera){y.default.fire({icon:"error",title:"Error",text:"Por favor, selecciona una carrera.",confirmButtonText:"OK"});return}let a=document.getElementById(n);a&&(a.style.display="block");try{this.aPdfService.GenerarPdf(e,n),y.default.fire({icon:"success",title:"\xC9xito",text:"Se descarg\xF3 correctamente.",confirmButtonText:"OK"}),a&&(a.style.display="none")}catch{a&&(a.style.display="none"),y.default.fire({icon:"error",title:"Error",text:"Hubo un problema al descargar. Intentelo de nuevo",confirmButtonText:"OK"})}}};c.\u0275fac=function(n){return new(n||c)(C(Y),C(X),C(q),C(J),C($),C(D))},c.\u0275cmp=S({type:c,selectors:[["app-lista-mesa-examen"]],standalone:!0,features:[V],decls:60,vars:6,consts:[[1,"body","container-fluid"],[1,"filtros","row","mb-3","justify-content-end","no-print"],[1,"col-md-3","col-10"],[1,"input-group"],["type","text","placeholder","Buscar",1,"form-control",3,"input"],["routerLink","",1,"input-group-text"],[1,"fas","fa-search"],[1,"col-2","d-flex","d-md-none","justify-content-end","no-print"],[1,"btn","btnfiltros",3,"click"],[1,"fa-solid","fa-sliders",2,"color","#000000"],[1,"d-none","col-md-9","d-md-flex","justify-content-end","no-print"],[1,"col-md-2","mx-2"],["id","selectLlamado",1,"form-select",3,"change"],["disabled","","selected","","hidden",""],["value","PRIMERO"],["value","SEGUNDO"],["value","UNICO"],["id","selectCarrera",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["id","selectA\xF1o",1,"form-select",3,"change"],["id","canvasElement",2,"display","none"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa-solid","fa-file-pdf","ml-2"],[1,"filters-mobile","d-md-none","no-print"],[1,"cards","row"],["class","text-center my-3",4,"ngIf"],[1,"card","m-3",2,"max-width","380px",3,"class"],["id","contenedor",1,"flex","justify-center","items-center","h-screen","mx-5",2,"display","none"],[1,"text-xl","font-semibold","mb-4","text-center"],[1,"overflow-x-auto","px-4"],[1,"min-w-full","border","border-gray-300"],[1,"text-gray-700"],[1,"p-3","border","border-gray-300","text-left"],[4,"ngFor","ngForOf"],[3,"value"],[1,"no-print"],["id","selectLlamado",1,"form-select",3,"ngModelChange","change","ngModel"],["disabled","","hidden","",3,"ngValue",4,"ngIf"],[1,"my-2","no-print"],["id","selectCarrera",1,"form-select",3,"ngModelChange","change","ngModel"],["id","selectA\xF1o",1,"form-select",3,"ngModelChange","change","ngModel"],[1,"col-12","justify-content-end"],[1,"my-2"],["disabled","","hidden","",3,"ngValue"],[1,"text-center","my-3"],[1,"card","m-3",2,"max-width","380px"],[1,"side-highlight"],[1,"row","g-0"],[1,"card-header","col-md-12"],[1,"card-title","m-2"],[1,"col-md-12"],[1,"card-body"],[1,"card-date"],[1,"mx-3","text-center"],[1,"bi","bi-calendar4"],[1,"mx-3"],[1,"card-footer","d-flex","justify-content-end"],[1,"d-flex"],[1,"btn","btn-success","me-2",3,"routerLink"],[1,"bi","bi-pencil"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"p-3","border","border-gray-300","font-semibold","text-left"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),g("input",function(f){return a.buscarMesa(f)}),i(),t(5,"a",5),p(6,"i",6),i()()(),t(7,"div",7)(8,"button",8),g("click",function(){return a.toggleFilters()}),p(9,"i",9),i()(),t(10,"div",10)(11,"div",11)(12,"select",12),g("change",function(f){return a.filtrarPorLlamado(f)}),t(13,"option",13),l(14,"Llamado"),i(),t(15,"option",14),l(16,"1\xB0 Llamado"),i(),t(17,"option",15),l(18,"2\xB0 Llamado"),i(),t(19,"option",16),l(20,"Llamado \xFAnico"),i()()(),t(21,"div",11)(22,"select",17),g("change",function(f){return a.filtrarPorCarrera(f)}),t(23,"option",13),l(24,"Carrera"),i(),_(25,te,2,2,"option",18),i()(),t(26,"div",11)(27,"select",19),g("change",function(f){return a.filtrarPorAnio(f)}),t(28,"option",13),l(29,"A\xF1o"),i(),_(30,ne,2,2,"option",18),i()(),t(31,"div",11),p(32,"canvas",20),t(33,"button",21),g("click",function(){return a.aPdf("canvasElement","contenedor")}),l(34,"Descragar PDF "),p(35,"i",22),i()()()(),_(36,se,24,8,"div",23),p(37,"br"),i(),t(38,"div",24),_(39,ce,5,0,"div",25),k(40,de,24,10,"div",26,I),i(),t(42,"div",27)(43,"div")(44,"h2",28),l(45),i(),t(46,"div",29)(47,"table",30)(48,"thead")(49,"tr",31)(50,"th",32),l(51,"A\xF1o"),i(),t(52,"th",32),l(53,"Asignatura"),i(),t(54,"th",32),l(55,"Llamado y Fecha"),i(),t(56,"th",32),l(57,"Tribunal"),i()()(),t(58,"tbody"),_(59,me,13,5,"tr",33),i()()()()()),n&2&&(s(25),m("ngForOf",a.carreras),s(5),m("ngForOf",a.aniosDisponibles),s(6),F(a.showFilters?36:-1),s(3),m("ngIf",a.mesasFiltradas.length===0),s(),A(a.mesasFiltradas),s(5),M("CARRERA: ",a.carreraXid,""),s(14),m("ngForOf",a.mesasFiltradas))},dependencies:[B,j,z,G,H,K,U,W,R,N],styles:["header[_ngcontent-%COMP%]{background-color:transparent;padding:15px}.ttlseccion[_ngcontent-%COMP%]{font-size:25px;font-weight:700;color:#4d44b5}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto;display:flex;border-radius:10px;background-color:#ffffffab;justify-content:center;align-items:center}.avatar[_ngcontent-%COMP%], .fotoPerfil[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;margin-left:8px}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%]{cursor:pointer;color:#555353;text-decoration:none}.perfilUser[_ngcontent-%COMP%]{padding:5px;align-items:center;margin-left:5px;text-decoration:none;color:#000}@media (max-width: 840px){header[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;align-items:flex-start}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-top:60px;margin-left:10px}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%]{font-size:10px;margin:3px}.fotoPerfil[_ngcontent-%COMP%]{width:25px;height:25px;margin-left:5px}.perfilUser[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}}.headerNewMesa[_ngcontent-%COMP%], .deletemesa[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.new-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;text-align:right}.new-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border-radius:50%;width:30px;height:30px;display:flex;justify-content:center;align-items:center;font-size:20px;cursor:pointer}.delete-button[_ngcontent-%COMP%]{background-color:#f07252;color:#fff;border-radius:50%;width:30px;height:30px;display:flex;justify-content:center;align-items:center;font-size:20px;cursor:pointer}.new-button[_ngcontent-%COMP%]:hover.card, .delete-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.fas[_ngcontent-%COMP%]{font-size:16px;color:#000;text-decoration:none}.highlight-informatica[_ngcontent-%COMP%]   .side-highlight[_ngcontent-%COMP%]{background-color:#524abd}.highlight-primaria[_ngcontent-%COMP%]   .side-highlight[_ngcontent-%COMP%]{background-color:#ece930}.highlight-lengua[_ngcontent-%COMP%]   .side-highlight[_ngcontent-%COMP%]{background-color:#f39121}.highlight-mantInd[_ngcontent-%COMP%]   .side-highlight[_ngcontent-%COMP%]{background-color:#a71906}.highlight-biolog[_ngcontent-%COMP%]   .side-highlight[_ngcontent-%COMP%]{background-color:#26a706}.input-group[_ngcontent-%COMP%]{background-color:#b4b4b9;border-radius:20px}.input-group-text[_ngcontent-%COMP%]{background-color:transparent;border-radius:20px;cursor:pointer}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#4d44b5;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#4d44b5;border-color:#4d44b5}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{padding:10px;border-radius:5px;width:100%}.btnAcepInsc[_ngcontent-%COMP%]{text-align:right}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;width:auto;min-width:80px}.btn-agregar-mesa[_ngcontent-%COMP%]{color:#000;border:none;padding:8px;border:1px solid rgba(199,198,198,.267);font-size:13px;font-family:Poppins,sans-serif;border-radius:20px;border-color:#d4d2d2;display:inline-flex;align-items:center;cursor:pointer;transition:background-color .3s ease}.btn-agregar-mesa[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;margin-right:8px;font-size:18px}.btn-agregar-mesa[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#fff;margin-right:8px;font-size:18px}.btn-agregar-mesa[_ngcontent-%COMP%]:hover{background-color:#0d47a1;color:#fff;transform:scale(1.05)}.card[_ngcontent-%COMP%]{display:flex;overflow:hidden;justify-content:center;border-radius:20px;display:inline-block;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease-in-out;padding-left:20px;padding-right:0;margin:0}.cards[_ngcontent-%COMP%]{justify-content:center}.side-highlight[_ngcontent-%COMP%]{width:20px;background-color:#fc0;border-top-left-radius:10px;border-bottom-left-radius:10px;position:absolute;top:0;bottom:0;left:0}.side-highlight-new[_ngcontent-%COMP%]{width:14px;background-color:#4caf50;border-top-left-radius:10px;border-bottom-left-radius:10px;position:absolute;top:0;bottom:0;left:0}.card-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:#888;font-size:12px}.card-tribunal[_ngcontent-%COMP%]{color:#666;font-size:12px}.card-date[_ngcontent-%COMP%]{display:flex;align-items:center;color:#000;font-size:15px;margin:3px 0}.card[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.card-header[_ngcontent-%COMP%]{padding:8px}.card-title[_ngcontent-%COMP%]{margin-left:10px}h4[_ngcontent-%COMP%]{color:#303972;font-size:17px;font-weight:600;margin:5px}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;margin:5px 5px 5px 10px}.card-body[_ngcontent-%COMP%]{background-color:#fff;padding:5px}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:.9em}i.bi-calendar4[_ngcontent-%COMP%]{margin-right:5px}.opcFiltro[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;text-overflow:ellipsis;background-color:transparent}.btnfiltros[_ngcontent-%COMP%]{padding:7px;border-radius:5px;width:100%;border:1px solid rgb(224,224,224)}.form-select[_ngcontent-%COMP%]{width:100%;font-size:14px;padding-right:30px;border-radius:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.form-select[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:20px}.input-group[_ngcontent-%COMP%]{background-color:#fff}"]});let r=c;return r})();export{Oe as ListaMesaExamenComponent};
