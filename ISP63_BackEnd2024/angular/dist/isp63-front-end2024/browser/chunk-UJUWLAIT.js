import{a as G}from"./chunk-LULZSSGU.js";import{a as $}from"./chunk-NYOVT7YK.js";import{a as W}from"./chunk-3XUV45YM.js";import"./chunk-CB6FNCUI.js";import{b as k,d as T,g as D,i as j,n as B,o as V,p as z,q as U,x as R}from"./chunk-WZ63J2F5.js";import{a as q}from"./chunk-SJWRDQVH.js";import"./chunk-5AS2EY2S.js";import{l as L}from"./chunk-5KY6YBJG.js";import{l as A,m as N,o as F}from"./chunk-4DCJT2OD.js";import{$a as C,Aa as c,Ba as u,Pa as g,Ra as p,W as M,Ya as n,Za as i,ab as v,bb as O,da as _,ea as b,eb as h,fb as E,mb as o,nb as f,ob as P,rb as I,sb as S,tb as w,vb as y}from"./chunk-X5N6KVFF.js";import{e as K}from"./chunk-EQDQRRRY.js";var x=K(q());function X(r,s){if(r&1&&(n(0,"option",23),o(1),i()),r&2){let l=s.$implicit;p("value",l.id),c(),P(" ",l.carrera," ")}}function H(r,s){if(r&1&&(n(0,"option",23),o(1),i()),r&2){let l=s.$implicit;p("value",l.value),c(),f(l.label)}}function J(r,s){if(r&1&&(n(0,"option",23),o(1),i()),r&2){let l=s.$implicit;p("value",l.nombre),c(),f(l.nombre)}}function Q(r,s){r&1&&(n(0,"option"),o(1,"Seleccione una Carrera y A\xF1o"),i())}function Y(r,s){r&1&&(n(0,"tr")(1,"td",24),o(2,"No hay inscriptos"),i()())}function Z(r,s){r&1&&(n(0,"span",27),o(1,"La calificaci\xF3n no es v\xE1lida"),i())}function ee(r,s){if(r&1){let l=O();C(0),n(1,"tr")(2,"td"),o(3),i(),n(4,"td"),o(5),i(),n(6,"td"),o(7),i(),n(8,"td"),o(9),i(),n(10,"td")(11,"input",25),w("ngModelChange",function(a){let t=_(l).$implicit;return S(t.nota,a)||(t.nota=a),b(a)}),i(),g(12,Z,2,0,"span",26),i()(),v()}if(r&2){let l=s.$implicit,e=s.index,a=E();c(3),f(l.nombreApellido),c(2),f(l.dni),c(2),f(l.materia),c(2),f(l.turnoLlamado),c(2),I("ngModel",l.nota),c(),p("ngIf",a.errores[e])}}var de=(()=>{let s=class s{constructor(e,a,t,d){this.infoMateriasService=e,this.infoCarrerasService=a,this.infoLlamadosService=t,this.router=d,this.filteredInscripMesas=[],this.datosAlumno=[],this.materias=[],this.selectedLlamado=null,this.selectedCarrera=null,this.selectedAnio=null,this.selectedMateria=null,this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"},{value:4,label:"4\xB0 a\xF1o"}],this.asignaturasFiltradas=[],this.carrerasFiltradas=[],this.showFilters=!1,this.errores=[]}ngOnInit(){this.infoLlamadosService.ObtenerListaInscriptosAceptados().subscribe(e=>{this.filteredInscripMesas=e,this.datosAlumno=e,console.log(this.filteredInscripMesas)},e=>{console.error("Error al obtener la lista de inscriptos:",e)}),this.infoLlamadosService.ObtenerDatos().subscribe(e=>{this.datosAlumno=e,this.filteredInscripMesas=e.alumnos??[]}),this.infoMateriasService.obtenerDatos().subscribe(e=>{this.materias=e}),this.infoCarrerasService.ObtenerDatos().subscribe(e=>{this.carreras=e})}toggleFilters(){this.showFilters=!this.showFilters}submitNotas(){let e=!0;this.filteredInscripMesas.forEach((t,d)=>{t.nota!==null&&t.nota!==void 0&&(t.nota<1||t.nota>10)?(this.errores[d]=!0,e=!1):this.errores[d]=!1}),e?(x.default.fire({icon:"success",title:"\xC9xito",text:"Las notas fueron guardadas con \xE9xito.",confirmButtonText:"OK"}),this.router.navigate(["/docente-dashboard"])):x.default.fire({icon:"error",title:"Error",text:"Error al cargar las notas.",confirmButtonText:"OK"});let a=this.filteredInscripMesas.filter(t=>t.nota!==null&&t.nota!==void 0).map(t=>({idInsc:t.idInsc,nota:t.nota,dni:t.dni,materia:t.materia,llamado:t.turnoLlamado}));a.length>0?this.infoLlamadosService.updateNota(a).subscribe(()=>{console.log("Notas enviadas correctamente")},t=>{console.error("Error al enviar las notas",t)}):console.log("No se enviaron datos porque no hay notas v\xE1lidas.")}validarNota(e,a){e.nota!==null&&e.nota!==void 0&&(e.nota<1||e.nota>10)?this.errores[a]=!0:this.errores[a]=!1}filtrarPorLlamado(e){this.selectedLlamado=e.target.value,this.selectedCarrera,this.selectedCarrera=null,this.selectedAnio=null,this.selectedMateria=null,this.materias=[];let a=document.getElementById("selectCarrera");a.selectedIndex=0;let t=document.getElementById("selectA\xF1o");t.selectedIndex=0;let d=document.getElementById("selectAsignatura");d.selectedIndex=0,this.aplicarFiltros(),console.log(this.selectedLlamado)}filtrarPorAnio(e){this.selectedAnio=e.target.value,this.obtenerMaterias(),this.selectedMateria=null;let a=document.getElementById("selectAsignatura");a.selectedIndex=0,this.aplicarFiltros()}filtrarPorAsignatura(e){this.selectedMateria=e.target.value,this.aplicarFiltros()}filtrarPorCarrera(e){this.selectedCarrera=Number(e.target.value),this.selectedAnio=null,this.selectedMateria=null;let a=document.getElementById("selectA\xF1o");a.selectedIndex=0;let t=document.getElementById("selectAsignatura");switch(t.selectedIndex=0,this.selectedCarrera){case 1:this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"}];break;default:this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"},{value:4,label:"4\xB0 a\xF1o"}];break}this.obtenerMaterias(),this.aplicarFiltros()}obtenerMaterias(){this.selectedCarrera!==null&&this.selectedAnio!==null&&this.selectedAnio!==0?this.infoMateriasService.obtenerAsigAnioCarrera(this.selectedCarrera,this.selectedAnio).subscribe(e=>{this.materias=e.map(a=>({id:a.id,nombre:a.nombre})),console.log("Materias obtenidas:",this.materias)},e=>{console.error("Error al obtener las materias:",e)}):console.warn("Por favor selecciona una carrera y un a\xF1o v\xE1lido.")}aplicarFiltros(){this.filteredInscripMesas=[...this.datosAlumno],this.selectedLlamado&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(e=>e.turnoLlamado===this.selectedLlamado)),this.selectedCarrera&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(e=>e.idcarrera===this.selectedCarrera)),this.selectedAnio&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(e=>e.anio===this.selectedAnio)),this.selectedMateria&&(this.filteredInscripMesas=this.filteredInscripMesas.filter(e=>e.materia===this.selectedMateria))}};s.\u0275fac=function(a){return new(a||s)(u(G),u(W),u($),u(L))},s.\u0275cmp=M({type:s,selectors:[["app-notas-mesa-examen"]],standalone:!0,features:[y],decls:54,vars:6,consts:[[1,"body","container-fluid"],[1,"filtros","row","mb-3","justify-content-end","no-print"],[1,"col-md-9","col-12","d-md-flex","justify-content-end","no-print"],[1,"col-md-3","col-12","mx-2","my-2","no-print"],["id","selectLlamado",1,"form-select",3,"change"],["disabled","","selected","","hidden",""],["value","PRIMERO"],["value","SEGUNDO"],["value","UNICO"],[1,"col-md-2","col-12","mx-2","my-2","no-print"],["id","selectCarrera",1,"form-select","auto",3,"change"],[3,"value",4,"ngFor","ngForOf"],["id","selectA\xF1o",1,"form-select","auto","m",3,"change"],[1,"col-md","col-12","no-print","col-md-3","mx-2","my-2"],["id","selectAsignatura",1,"form-select",3,"change"],[4,"ngIf"],[1,"table-responsive","mt-6"],["id","tablaAlumNotas",1,"table","table-hover","text-center","align-middle"],["colspan","5",1,"table-title","text-center"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-end","no-print"],[1,"d-inline-flex"],["id","AcepInsc","routerLink","",1,"btn","btn-success","btn-sm","mx-5",3,"click"],[3,"value"],["colspan","5",1,"text-center"],["type","number","min","1","max","10","step","1","placeholder","Ingrese nota",1,"form-control","text-center",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(a,t){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"select",4),h("change",function(m){return t.filtrarPorLlamado(m)}),n(5,"option",5),o(6,"Llamado"),i(),n(7,"option",6),o(8,"1\xB0 Llamado"),i(),n(9,"option",7),o(10,"2\xB0 Llamado"),i(),n(11,"option",8),o(12,"Llamado \xFAnico"),i()()(),n(13,"div",9)(14,"select",10),h("change",function(m){return t.filtrarPorCarrera(m)}),n(15,"option",5),o(16,"Carrera"),i(),g(17,X,2,2,"option",11),i()(),n(18,"div",9)(19,"select",12),h("change",function(m){return t.filtrarPorAnio(m)}),n(20,"option",5),o(21,"A\xF1o"),i(),g(22,H,2,2,"option",11),i()(),n(23,"div",13)(24,"select",14),h("change",function(m){return t.filtrarPorAsignatura(m)}),n(25,"option",5),o(26,"Asignatura"),i(),g(27,J,2,2,"option",11)(28,Q,2,0,"option",15),i()()()(),n(29,"div",16)(30,"table",17)(31,"thead")(32,"tr")(33,"th",18),o(34," ASIGNAR NOTAS DE MESA DE EXAMEN "),i()(),n(35,"tr")(36,"th"),o(37,"Nombre y Apellido"),i(),n(38,"th"),o(39,"DNI"),i(),n(40,"th"),o(41,"Materia"),i(),n(42,"th"),o(43,"Llamado"),i(),n(44,"th"),o(45,"Nota"),i()()(),n(46,"tbody"),g(47,Y,3,0,"tr",15)(48,ee,13,6,"ng-container",19),n(49,"tr")(50,"td",20)(51,"div",21)(52,"button",22),h("click",function(){return t.submitNotas()}),o(53,"Aceptar"),i()()()()()()()()),a&2&&(c(17),p("ngForOf",t.carreras),c(5),p("ngForOf",t.aniosDisponibles),c(5),p("ngForOf",t.materias),c(),p("ngIf",t.materias.length===0),c(19),p("ngIf",t.filteredInscripMesas.length===0),c(),p("ngForOf",t.filteredInscripMesas))},dependencies:[F,A,N,R,B,V,k,j,T,U,z,D],styles:["header[_ngcontent-%COMP%]{background-color:transparent;padding:15px}h2[_ngcontent-%COMP%]{font-weight:700;color:#4d44b5;font-size:25px}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;overflow:hidden;padding-left:5px}th[_ngcontent-%COMP%]{background-color:#e7e7ff;color:#4d44b5;text-align:left;vertical-align:middle}td[_ngcontent-%COMP%], .ttlcarrera[_ngcontent-%COMP%], .infcarrera[_ngcontent-%COMP%]{vertical-align:middle;max-width:180px!important;text-align:left;min-width:50px;margin:8px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.fotoPerfil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:8px}.fotoPerfil[_ngcontent-%COMP%]{height:50px;width:50px;margin-left:8px}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#4d44b5;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#4d44b5;border-color:#4d44b5}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto;display:flex;border-radius:10px;background-color:#ffffffab;justify-content:center;align-items:center}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%], .perfilUser[_ngcontent-%COMP%]{cursor:pointer;color:#555353;text-decoration:none}.perfilUser[_ngcontent-%COMP%]{padding:5px;align-items:center;margin-left:5px}.opcFiltro[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;text-overflow:ellipsis;background-color:transparent}.form-select[_ngcontent-%COMP%]{width:100%;font-size:14px;padding-right:30px;border-radius:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.form-select[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:20px}.input-group[_ngcontent-%COMP%]{background-color:#fff}.copy-alert[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%);z-index:1050;max-width:300px;padding:15px;border-radius:5px;box-shadow:0 2px 5px #0008;background-color:#bae08d;text-align:center}.table-title[_ngcontent-%COMP%]{padding:7px;text-align:left;font-size:17px;font-weight:400;color:#fff;background-color:#4d44b5}.checkbox[_ngcontent-%COMP%]{width:12px;height:12px;transform:scale(1.5)}.infcarrera[_ngcontent-%COMP%]{max-width:180px;text-overflow:ellipsis;overflow:hidden}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{padding:10px;border-radius:5px;width:100%}.btnAcepInsc[_ngcontent-%COMP%]{text-align:right}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;width:auto;min-width:80px}@media print{.no-print[_ngcontent-%COMP%]{display:none}}@media (max-width: 840px){header[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;align-items:flex-start}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-top:60px;margin-left:10px}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%]{font-size:10px;margin:3px}.fotoPerfil[_ngcontent-%COMP%]{width:25px;height:25px;margin-left:5px}.perfilUser[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.avatar[_ngcontent-%COMP%]{justify-content:center;width:35px;height:35px;border-radius:50%;margin:10px}}"]});let r=s;return r})();export{de as NotasMesaExamenComponent};
