import{a as g}from"./chunk-4ATTAGCL.js";import{a as v}from"./chunk-SJWRDQVH.js";import{a as m,b as f}from"./chunk-EITPQ4QS.js";import{a as p,c as d}from"./chunk-5KY6YBJG.js";import{I as c,M as h,R as l,k as a,v as i}from"./chunk-X5N6KVFF.js";import{e as T}from"./chunk-EQDQRRRY.js";var n=T(v());var O=(()=>{let o=class o{constructor(t,e,r){this.http=t,this.authService=e,this.notificacionService=r,this.dni="",this.url=m.apiUrl+"api/turnos"}getHeaders(){let t=new p;if(this.authService.isAuthenticated()){let e=localStorage.getItem("authToken");this.dni=String(localStorage.getItem("dni")),t=t.set("Authorization",`Bearer ${e}`)}return t}obtenerDatos(){let t=this.getHeaders();return this.http.get(`${this.url}`,{headers:t}).pipe(i(this.handleError))}findAll(){let t=this.getHeaders();return this.http.get(this.url,{headers:t}).pipe(i(this.handleError))}findById(t){let e=this.getHeaders();return this.http.get(`${this.url}/${t}`,{headers:e}).pipe(i(this.handleError))}saveTurno(t){let e=this.getHeaders();return this.http.post(`${this.url}`,t,{headers:e}).pipe(c(r=>{n.default.fire({icon:"success",title:"Genial!",text:"El turno se registro exitosamente.",confirmButtonText:"OK"});let s=["ESTUDIANTE","DOCENTE"];this.notificacionService.enviarNotificacionARoles("Turno creado",s).subscribe({next:()=>console.log("Notificaci\xF3n enviada a roles exitosamente."),error:E=>console.error("Error al enviar la notificaci\xF3n a roles:",E)})}),i(r=>(n.default.fire({icon:"error",title:"Error",text:"Hubo un problema al guardar el Turno. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"}),console.error("Error al registrar el Turno",r),a(r))))}editarTurno(t,e){let r=this.getHeaders();return this.http.put(`${this.url}/${t}`,e,{headers:r}).pipe(c(s=>{n.default.fire({icon:"success",title:"Genial!",text:"El turno se pudo editar correctamente.",confirmButtonText:"OK"}),this.notificacionService.crearNotificacion("Turno actualizado",this.dni).subscribe()}),i(s=>(n.default.fire({icon:"error",title:"Error",text:"Hubo un problema al editar el Turno. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"}),console.error("Error al editar el turno:",s),a(s))))}deleteTurno(t){let e=this.getHeaders();return this.http.delete(`${this.url}/${t}`,{headers:e}).pipe(c(r=>{n.default.fire({icon:"success",title:"Genial!",text:"El turno se elimino correctamente.",confirmButtonText:"OK"})}),i(r=>(n.default.fire({icon:"error",title:"Error",text:"Hubo un problema al eliminar el Turno. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"}),console.error("Error al eliminar el turno:",r),a(r))))}obtenerTurnoHabilitado(){let t=this.getHeaders();return this.http.get(`${this.url}/habilitado`,{headers:t}).pipe(i(this.handleError))}handleError(t){return console.error("A ocurrido un error",t),a(t.message||"Server Error")}};o.\u0275fac=function(e){return new(e||o)(l(d),l(f),l(g))},o.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"});let u=o;return u})();export{O as a};
