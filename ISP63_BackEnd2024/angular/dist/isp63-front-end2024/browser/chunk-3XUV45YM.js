import{a as b}from"./chunk-CB6FNCUI.js";import{a as v}from"./chunk-SJWRDQVH.js";import{a as u,b as g}from"./chunk-5AS2EY2S.js";import{a as f,c as d}from"./chunk-5KY6YBJG.js";import{I as s,M as m,R as l,j as p,k as n,v as o}from"./chunk-X5N6KVFF.js";import{e as x}from"./chunk-EQDQRRRY.js";var a=x(v());var O=(()=>{let i=class i{constructor(r,t,e){this.http=r,this.authService=t,this.notificacionService=e,this.apiUrl=u.apiUrl+"api/carreras",this.authUrl=u.apiUrl+"auth/carreras",this.dni=""}getHeaders(){let r=new f;if(this.authService.isAuthenticated()){let t=localStorage.getItem("authToken");this.dni=String(localStorage.getItem("dni")),r=r.set("Authorization",`Bearer ${t}`)}return r}ObtenerDatos(){return this.http.get(`${this.authUrl}`).pipe()}getCarreras(){return this.http.get(this.authUrl).pipe(o(r=>p([])))}getCarrerasConFiles(){return this.http.get(`${this.authUrl}/confiles`).pipe()}getCarrera(r){return this.http.get(`${this.authUrl}/${r}`).pipe(o(this.handleError))}createCarrera(r){let t=this.getHeaders();return this.http.post(this.apiUrl,r,{headers:t}).pipe(s(e=>{a.default.fire({icon:"success",title:"Genial!",text:"La carrera se registro exitosamente.",confirmButtonText:"OK"}),this.dni?this.notificacionService.crearNotificacion("Carrera creada",this.dni).subscribe(()=>console.log("Notificaci\xF3n creada correctamente"),c=>console.error("Error al crear la notificaci\xF3n",c)):console.error("DNI no est\xE1 definido")}),o(e=>(a.default.fire({icon:"error",title:"Error",text:"Hubo un problema guardar. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"}),console.error("Error al subircarrera",e),n(e))))}updateCarrera(r,t){let e=this.getHeaders();return this.http.put(`${this.apiUrl}/${r}`,t,{headers:e}).pipe(s(c=>{a.default.fire({icon:"success",title:"Actualizaci\xF3n exitosa!",text:"La carrera fue actualizada correctamente.",confirmButtonText:"OK"}),this.notificacionService.crearNotificacion("Carrera actualizada",this.dni).subscribe()}),o(c=>(a.default.fire({icon:"error",title:"Error en la actualizaci\xF3n",text:"Hubo un problema al actualizar la carrera. Int\xE9ntalo nuevamente.",confirmButtonText:"OK"}),n(c))))}deleteCarrera(r){let t=this.getHeaders();return this.http.delete(`${this.apiUrl}/${r}`,{headers:t}).pipe(s(()=>{a.default.fire({icon:"success",title:"Eliminaci\xF3n exitosa!",text:"La carrera fue eliminada correctamente.",confirmButtonText:"OK"}),this.notificacionService.crearNotificacion("Carrera eliminada",this.dni).subscribe()}),o(e=>(a.default.fire({icon:"error",title:"Error en la eliminaci\xF3n",text:`Hubo un problema al eliminar la carrera con id ${r}. Int\xE9ntalo nuevamente.`,confirmButtonText:"OK"}),n(e))))}handleError(r){let t=this.getHeaders();return console.warn("A ocurrido un error",r),n(r.message||"Server Error")}};i.\u0275fac=function(t){return new(t||i)(l(d),l(g),l(b))},i.\u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"});let h=i;return h})();export{O as a};
