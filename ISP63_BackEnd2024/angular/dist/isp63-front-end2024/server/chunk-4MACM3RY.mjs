import './polyfills.server.mjs';
import{a as q}from"./chunk-IRZSTLHF.mjs";import{a as K}from"./chunk-F4ATWRRD.mjs";import"./chunk-RASVRGHT.mjs";import{a as N,d as z,g as D,m as W,n as H,o as U,x as R}from"./chunk-6UOH6BPV.mjs";import{a as v}from"./chunk-VZSOSELC.mjs";import"./chunk-TSFAZMOB.mjs";import{q as V,r as B,t as j}from"./chunk-IRK2UOVA.mjs";import{n as F,o as k,q as T}from"./chunk-RL6AEQ4N.mjs";import{$a as i,Ca as s,Da as C,Ra as x,Ta as p,W as S,Wa as I,_a as t,ab as O,bb as y,cb as E,da as f,db as w,ea as h,gb as m,hb as _,ob as l,pb as u,qb as A,tb as M,ub as b,vb as P,xb as L}from"./chunk-KLZ53CP7.mjs";import"./chunk-5XUXGTUW.mjs";function G(c,d){if(c&1&&(t(0,"option",30),l(1),i()),c&2){let r=d.$implicit;p("value",r.value),s(),u(r.label)}}function $(c,d){c&1&&(t(0,"option",35),l(1,"Llamado"),i()),c&2&&p("ngValue",null)}function J(c,d){c&1&&(t(0,"option",35),l(1,"A\xF1o"),i()),c&2&&p("ngValue",null)}function Q(c,d){if(c&1&&(t(0,"option",30),l(1),i()),c&2){let r=d.$implicit;p("value",r.value),s(),u(r.label)}}function X(c,d){if(c&1){let r=w();t(0,"div",20)(1,"div",31)(2,"select",32),P("ngModelChange",function(n){f(r);let o=_();return b(o.selectedLlamado,n)||(o.selectedLlamado=n),h(n)}),m("change",function(n){f(r);let o=_();return h(o.filtrarPorLlamado(n))}),x(3,$,2,1,"option",33),t(4,"option",14),l(5,"1\xB0 Llamado"),i(),t(6,"option",15),l(7,"2\xB0 Llamado"),i(),t(8,"option",16),l(9,"Llamado \xFAnico"),i()()(),t(10,"div",31)(11,"select",34),P("ngModelChange",function(n){f(r);let o=_();return b(o.selectedAnio,n)||(o.selectedAnio=n),h(n)}),m("change",function(n){f(r);let o=_();return h(o.filtrarPorAnio(n))}),x(12,J,2,1,"option",33)(13,Q,2,2,"option",19),i()()()}if(c&2){let r=_();s(2),M("ngModel",r.selectedLlamado),s(),p("ngIf",!r.selectedLlamado),s(8),M("ngModel",r.selectedAnio),s(),p("ngIf",!r.selectedAnio),s(),p("ngForOf",r.aniosDisponibles)}}function Y(c,d){if(c&1){let r=w();y(0),t(1,"tr")(2,"td",24)(3,"input",36),P("ngModelChange",function(n){let o=f(r).$implicit;return b(o.seleccionada,n)||(o.seleccionada=n),h(n)}),i()(),t(4,"td"),l(5),i(),t(6,"td"),l(7),i(),t(8,"td"),l(9),i(),t(10,"td"),l(11),i(),t(12,"td"),l(13),i()(),E()}if(c&2){let r=d.$implicit;s(3),M("ngModel",r.seleccionada),s(2),u(r.llamado),s(2),u(r.fechayHora),s(2),A("",r.anio,"\xB0 A\xF1o"),s(2),u(r.asignatura),s(2),u(r.tribunal)}}var se=(()=>{let d=class d{constructor(e,n,o){this.infoLlamadosService=e,this.turnosService=n,this.router=o,this.selectedLlamado=null,this.selectedAnio=null,this.aniosDisponibles=[{value:1,label:"1\xB0 a\xF1o"},{value:2,label:"2\xB0 a\xF1o"},{value:3,label:"3\xB0 a\xF1o"},{value:4,label:"4\xB0 a\xF1o"}],this.showAlert=!1,this.selectedMaterias=[],this.showFilters=!1}ngOnInit(){this.infoLlamadosService.ObtenerDatos().subscribe(e=>{e.sort((n,o)=>n.asignatura.localeCompare(o.asignatura)),this.datosInscripcion=e,this.datosInscripcionSearch=e}),this.turnosService.obtenerTurnoHabilitado().subscribe({next:e=>{if(console.log("Datos de TurnoHabilitadoDTO:",e),!e.habilitado){v.fire({icon:"info",title:"El per\xEDodo de preinscripci\xF3n ha finalizado.",text:"Actualmente no est\xE1n habilitadas las preinscripciones.",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/estudiante-dashboard"])});return}}})}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}buscarMesa(e){let n=e.target.value.toLowerCase(),o=this.datosInscripcion?.filter(a=>this.removeAccents(a.asignatura.toLowerCase()).includes(n)||this.removeAccents(a.carrera.toLowerCase()).includes(n)||a.fechayHora.toString().includes(n)||this.removeAccents(a.tribunal.toLowerCase()).includes(n)||this.removeAccents(a.llamado.toLowerCase()).includes(n))??[];this.datosInscripcionSearch=o}closeAlert(){this.showAlert=!1}toggleSelectAll(e){let n=e.target.checked;this.datosInscripcion.forEach(o=>{o.seleccionada=n})}toggleMesaSelection(e){e.seleccionada=!e.seleccionada}submit(){let e=this.datosInscripcion.filter(a=>a.seleccionada).map(a=>a.id);if(e.length===0){alert("Por favor, seleccione al menos una mesa.");return}this.selectedMaterias=this.datosInscripcion.filter(a=>a.seleccionada).map(a=>({materia:a.asignatura,fecha:a.fechayHora})),this.showAlert=!0;let n="PENDIENTE",o=this.selectedMaterias.map(a=>`<li class="m-2"> ${a.materia} (${a.fecha})</li>`).join("");this.infoLlamadosService.saveInscripcion(e,n).subscribe(a=>{v.fire({icon:"success",title:"Pre-inscripci\xF3n registrada con \xE9xito",html:`<ul>${o}</ul>`,confirmButtonText:"OK"}),this.router.navigate(["/estudiante-dashboard"]),console.log("Inscripci\xF3n guardada exitosamente",a)},a=>{v.fire({icon:"error",title:"Error al registrar la inscripci\xF3n.",text:"Por favor, aseg\xFArese de seleccionar \xFAnicamente un llamado para cada materia seleccionada.",confirmButtonText:"OK"}),console.error("Error al guardar la inscripci\xF3n",a)})}filtrarPorLlamado(e){this.selectedLlamado=e.target.value,this.aplicarFiltros()}filtrarPorAnio(e){this.selectedAnio=parseInt(e.target.value,10),this.aplicarFiltros()}aplicarFiltros(){this.datosInscripcionSearch=[...this.datosInscripcion],this.selectedLlamado&&(this.datosInscripcionSearch=this.datosInscripcionSearch.filter(e=>e.llamado===this.selectedLlamado)),this.selectedAnio&&(this.datosInscripcionSearch=this.datosInscripcionSearch.filter(e=>e.anio===this.selectedAnio))}toggleFilters(){this.showFilters=!this.showFilters}};d.\u0275fac=function(n){return new(n||d)(C(K),C(q),C(V))},d.\u0275cmp=S({type:d,selectors:[["app-pre-inscripcion-mesa"]],standalone:!0,features:[L],decls:54,vars:3,consts:[[1,"body","container-fluid"],[1,"filtros","row","mb-3","justify-content-end","no-print"],[1,"col-md-3","col-10"],[1,"input-group","d-flex"],["type","text","placeholder","Buscar",1,"form-control",3,"input"],["routerLink","",1,"iconBusc","input-group-text"],[1,"fas","fa-search"],[1,"col-2","d-flex","d-md-none","justify-content-end","no-print"],[1,"btn","btnfiltros",3,"click"],[1,"fa-solid","fa-sliders",2,"color","#000000"],[1,"d-none","col-md-9","d-md-flex","justify-content-end","no-print"],[1,"mx-2","no-print"],["id","selectLlamado",1,"form-select",3,"change"],["disabled","","selected","","hidden",""],["value","PRIMERO"],["value","SEGUNDO"],["value","UNICO"],[1,"col-md-2","mx-2","no-print"],["id","selectedAnio",1,"form-select","auto","m",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"filters-mobile","d-md-none","no-print"],[1,"table-responsive"],["id","tablaAlumInsc",1,"table","table-hover","text-center","align-middle"],["colspan","8",1,"table-title","text-center"],[1,"no-pdf"],["type","checkbox",1,"checkbox","m-2","no-print",3,"change"],[4,"ngFor","ngForOf"],["colspan","8",1,"text-end","no-print"],[1,"d-inline-flex"],["id","AcepInsc",1,"btn","btn-success","btn-sm","mx-1",3,"click"],[3,"value"],[1,"no-print","my-2"],["id","selectLlamado",1,"form-select",3,"ngModelChange","change","ngModel"],["disabled","","hidden","",3,"ngValue",4,"ngIf"],["id","selectedAnio",1,"form-select",3,"ngModelChange","change","ngModel"],["disabled","","hidden","",3,"ngValue"],["type","checkbox",1,"checkbox","m-2","no-print",3,"ngModelChange","ngModel"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),m("input",function(g){return o.buscarMesa(g)}),i(),t(5,"a",5)(6,"span"),O(7,"i",6),i()()()(),t(8,"div",7)(9,"button",8),m("click",function(){return o.toggleFilters()}),O(10,"i",9),i()(),t(11,"div",10)(12,"div",11)(13,"select",12),m("change",function(g){return o.filtrarPorLlamado(g)}),t(14,"option",13),l(15,"Llamado"),i(),t(16,"option",14),l(17,"1\xB0 Llamado"),i(),t(18,"option",15),l(19,"2\xB0 Llamado"),i(),t(20,"option",16),l(21,"Llamado \xFAnico"),i()()(),t(22,"div",17)(23,"select",18),m("change",function(g){return o.filtrarPorAnio(g)}),t(24,"option",13),l(25,"A\xF1o"),i(),x(26,G,2,2,"option",19),i()()(),x(27,X,14,5,"div",20),i(),t(28,"div",21)(29,"table",22)(30,"thead")(31,"tr")(32,"th",23),l(33," Mesas de Ex\xE1men "),i()(),t(34,"tr")(35,"th",24)(36,"input",25),m("change",function(g){return o.toggleSelectAll(g)}),i()(),t(37,"th"),l(38,"Llamado"),i(),t(39,"th"),l(40,"Fecha y Hora"),i(),t(41,"th"),l(42,"A\xF1o"),i(),t(43,"th"),l(44,"Asignaturaa"),i(),t(45,"th"),l(46,"Tribunal"),i()()(),t(47,"tbody"),x(48,Y,14,6,"ng-container",26),t(49,"tr")(50,"td",27)(51,"div",28)(52,"button",29),m("click",function(){return o.submit()}),l(53,"Aceptar"),i()()()()()()()()),n&2&&(s(26),p("ngForOf",o.aniosDisponibles),s(),I(o.showFilters?27:-1),s(21),p("ngForOf",o.datosInscripcionSearch))},dependencies:[T,F,k,R,H,U,N,W,z,D,j,B],styles:['header[_ngcontent-%COMP%]{background-color:transparent;padding:15px}h2[_ngcontent-%COMP%]{font-weight:700;color:#4d44b5;font-size:25px}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;overflow:hidden;padding-left:5px}th[_ngcontent-%COMP%]{background-color:#e7e7ff;color:#4d44b5;text-align:left}td[_ngcontent-%COMP%], .ttlcarrera[_ngcontent-%COMP%], .infcarrera[_ngcontent-%COMP%]{vertical-align:middle;max-width:180px!important;text-align:left;min-width:50px;margin:8px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.fotoPerfil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:8px}.fotoPerfil[_ngcontent-%COMP%]{height:50px;width:50px;margin-left:8px}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#4d44b5;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#4d44b5;border-color:#4d44b5}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto;display:flex;border-radius:10px;background-color:#ffffffab;justify-content:center;align-items:center}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%], .perfilUser[_ngcontent-%COMP%]{cursor:pointer;color:#555353;text-decoration:none}.perfilUser[_ngcontent-%COMP%]{padding:5px;align-items:center;margin-left:5px}.opcFiltro[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;text-overflow:ellipsis;background-color:transparent}.form-select[_ngcontent-%COMP%]{width:100%;font-size:14px;padding-right:30px;border-radius:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.form-select[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:20px}.input-group[_ngcontent-%COMP%]{background-color:#fff}.copy-alert[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%);z-index:1050;max-width:300px;padding:15px;border-radius:5px;box-shadow:0 2px 5px #0008;background-color:#bae08d;text-align:center}.table-title[_ngcontent-%COMP%]{padding:7px;text-align:left;font-size:17px;font-weight:400;color:#fff;background-color:#4d44b5}.checkbox[_ngcontent-%COMP%]{width:12px;height:12px;transform:scale(1.5)}.infcarrera[_ngcontent-%COMP%]{max-width:180px;text-overflow:ellipsis;overflow:hidden}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{padding:10px;border-radius:5px;width:100%}.btnAcepInsc[_ngcontent-%COMP%]{text-align:right}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;width:auto;min-width:80px}@media print{.no-print[_ngcontent-%COMP%]{display:none}}@media (max-width: 840px){header[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;align-items:flex-start}.iconUsuario[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:4px;width:auto;height:auto}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-top:60px;margin-left:10px}.iconMsj[_ngcontent-%COMP%], .iconNot[_ngcontent-%COMP%]{font-size:10px;margin:3px}.fotoPerfil[_ngcontent-%COMP%]{width:25px;height:25px;margin-left:5px}.perfilUser[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.avatar[_ngcontent-%COMP%]{justify-content:center;width:35px;height:35px;border-radius:50%;margin:10px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 10px #0000001a;width:auto;max-width:80%;text-align:start}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:25px;margin-bottom:10px}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2714";color:green;font-size:18px;position:absolute;left:0;top:0;line-height:1.5}']});let c=d;return c})();export{se as PreInscripcionMesaComponent};
