import './polyfills.server.mjs';
import{a as m}from"./chunk-RASVRGHT.mjs";import{a as n,b as d}from"./chunk-TSFAZMOB.mjs";import{a as p,b as l,c as u}from"./chunk-IRK2UOVA.mjs";import{M as c,R as s,k as h,v as a}from"./chunk-KLZ53CP7.mjs";var E=(()=>{let e=class e{constructor(t,r,i){this.http=t,this.authService=r,this.notificacionService=i,this.apiUrl=n.apiUrl+"api/usuario",this.url=n.apiUrl+"api/usuario",this.dni=""}getHeaders(){let t=new p;if(this.authService.isAuthenticated()){let r=localStorage.getItem("authToken");this.dni=String(localStorage.getItem("dni")),t=t.set("Authorization",`Bearer ${r}`)}return t}obtenerDatos(){let t=this.getHeaders();return this.http.get(`${this.url}`).pipe(a(this.handleError))}getUsersByRol(t){return this.http.get(`${this.url}/rol/${t}`).pipe(a(this.handleError))}handleError(t){return console.error("A ocurrido un error",t),h(t.message||"Server Error")}getUsers(){let t=this.getHeaders();return this.http.get(`${this.apiUrl}`,{headers:t})}getUserByDni(t){let r=this.getHeaders(),i=`${this.apiUrl}/${t}`;return this.http.get(i,{headers:r})}ChangePassword(t){let r=this.getHeaders(),i=`${this.apiUrl}/cambiarpassword/${this.dni}`,g=new l().set("newPassword",t);return console.log(i),this.http.put(i,{},{headers:r,params:g})}};e.\u0275fac=function(r){return new(r||e)(s(u),s(d),s(m))},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();export{E as a};
