import './polyfills.server.mjs';
import{a as Q}from"./chunk-BTZSB2PD.mjs";import{a as J}from"./chunk-VPCEHEXH.mjs";import{a as K}from"./chunk-DUHLUIU6.mjs";import{a as G}from"./chunk-L74Q72SY.mjs";import{a as P}from"./chunk-ESC3YH5X.mjs";import"./chunk-J5UG77ZP.mjs";import{b as j,d as D,e as A,f as R,g as k,h as L,m as V,n as q,o as H,r as U,x as z}from"./chunk-6UOH6BPV.mjs";import"./chunk-VZSOSELC.mjs";import"./chunk-H2FZU6DH.mjs";import{n as O,q as F,t as N}from"./chunk-IRK2UOVA.mjs";import{n as W,q as B}from"./chunk-RL6AEQ4N.mjs";import{$a as i,Ca as r,Da as E,Ra as w,Ta as u,W as y,Xa as h,Ya as x,Za as v,_a as n,gb as S,ob as s,pb as b,qb as C,rb as M,sb as I,tb as g,ub as p,vb as f,xb as T}from"./chunk-KLZ53CP7.mjs";import"./chunk-5XUXGTUW.mjs";var _=function(o){return o.PRIMERO="PRIMERO",o.SEGUNDO="SEGUNDO",o.UNICO="UNICO",o}(_||{});function Z(o,m){if(o&1&&(n(0,"option",19),s(1,"Selecciona un llamado"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l),r(),b(l)}}function $(o,m){if(o&1&&(n(0,"option",19),s(1,"Selecciona un turno"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l.id),r(),C("",l.turno," ")}}function ee(o,m){if(o&1&&(n(0,"option",20),s(1),i()),o&2){let l=m.$implicit;u("value",l.id),r(),b(l.carrera)}}function ne(o,m){if(o&1&&(n(0,"option",19),s(1,"Seleccione una Asignatura"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l.id),r(),I("",l.carrera_id," ",l.asignatura," A\xF1o ",l.anio,"\xB0 ")}}function ae(o,m){if(o&1&&(n(0,"option",19),s(1,"Selecciona un Presidente para la Mesa de Examen"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l.dni),r(),M("",l.nombre," ",l.apellido,"")}}function te(o,m){if(o&1&&(n(0,"option",19),s(1,"Selecciona el Vocal 1"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l.dni),r(),M("",l.nombre," ",l.apellido,"")}}function ie(o,m){if(o&1&&(n(0,"option",19),s(1,"Selecciona el Vocal 2"),i(),n(2,"option",20),s(3),i()),o&2){let l=m.$implicit;r(2),u("value",l.dni),r(),M("",l.nombre," ",l.apellido,"")}}var ve=(()=>{let m=class m{constructor(a,d,e,c,t,X,Y){this.mesaExamenServiceService=a,this.infoMateriasService=d,this.turnosService=e,this.userService=c,this.infoCarrerasService=t,this.route=X,this.router=Y,this.mesaExamen={id:0,fechaHora:"",llamado:"",presidente:"",vocal1:"",vocal2:"",turno:-1,asignatura:-1,carreraId:-1},this.modoEdicion=!1,this.llamadoTurnos=Object.values(_),this.docentes=[],this.asignaturas=[],this.turnos=[],this.carreras=[],this.errorMessage="",this.ultimoId=0}ngOnInit(){this.obtenerDocentes(),this.getTurnos(),this.getCarreras();let a=this.route.snapshot.params.id;a&&(this.modoEdicion=!0,this.loadMesaExamen(a))}loadMesaExamen(a){this.mesaExamenServiceService.findByTurno(a).subscribe({next:d=>{this.mesaExamen=d,console.log("Mesa de examen cargada",JSON.stringify(this.mesaExamen)),this.onCarreraChange(this.selectedCarreraId)},error:d=>{console.error("Error al cargar la mesa de exmamen:",d),this.errorMessage="Error al cargar la mesa de examen"}})}onSubmit(){this.modoEdicion?this.updateMesaExamen():this.saveMesaExamen(),this.mesaExamen.id=++this.ultimoId,console.log("Formulario enviado:",this.mesaExamen)}saveMesaExamen(){console.log(JSON.stringify(this.mesaExamen)),this.mesaExamenServiceService.saveMesaExamen(this.mesaExamen).subscribe(a=>{console.log("Mesa de Examen guardada exitosamente",a)},a=>{console.error("Error al guardar la mesa de examen",a)})}updateMesaExamen(){this.mesaExamenServiceService.actualizarMesaExamen(this.mesaExamen.id,this.mesaExamen).subscribe({next:a=>{console.log("Mesa de Examen actualizada:",a),this.router.navigate(["/listamesaexamen"])},error:a=>console.error("Error al actualizar la Mesa De Examen:",a)})}obtenerDocentes(){this.userService.getUsersByRol("DOCENTE").subscribe({next:a=>this.docentes=a,error:a=>this.errorMessage="Error al cargar docentes"})}obtenerMaterias(){this.infoMateriasService.obtenerDatos().subscribe(a=>{this.asignaturas=a})}getCarreras(){this.infoCarrerasService.getCarreras().subscribe(a=>{this.carreras=a},a=>{console.error("Error al obtener carreras",a)})}onCarreraChange(a){console.log("Carrera seleccionada:",a),a&&this.infoMateriasService.findByCarreraId(a).subscribe(d=>{this.asignaturas=d,this.modoEdicion&&(this.mesaExamen.asignatura=this.asignaturas.find(e=>e.id===this.mesaExamen.asignatura)?.id||-1),console.log("Asignaturas cargadas:",this.asignaturas)},d=>{console.error("Error al obtener asignaturas:",d)})}getTurnos(){this.turnosService.findAll().subscribe(a=>{this.turnos=a},a=>{this.errorMessage="Error al obtener los turnos",console.error(a)})}};m.\u0275fac=function(d){return new(d||m)(E(Q),E(K),E(J),E(P),E(G),E(O),E(F))},m.\u0275cmp=y({type:m,selectors:[["app-mesas-examen"]],standalone:!0,features:[T],decls:57,vars:10,consts:[[1,"flex","justify-center","items-center","min-h-screen"],[1,"bg-white","p-6","rounded-lg","shadow-md","w-full",3,"ngSubmit"],[1,"text-2xl","font-semibold","mb-4","text-gray-800"],[1,"grid","grid-cols-3","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["name","llamado",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","turno",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","fechaHora","type","datetime-local",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"mb-4"],["name","carrera","required","",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","change","ngModel"],["value","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["name","asignatura","required","",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","presidente","req","",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","vocal1","required","",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","vocal2","required","",1,"form-control","w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","justify-content-end"],["type","submit",1,"bg-blue-500","text-white","py-3","px-20","rounded-md","hover:bg-blue-600"],["value","","disabled","","selected","","hidden",""],[3,"value"]],template:function(d,e){d&1&&(n(0,"main",0)(1,"form",1),S("ngSubmit",function(){return e.onSubmit()}),n(2,"h2",2),s(3,"Crear mesa de examen"),i(),n(4,"div",3)(5,"div")(6,"label",4),s(7,"Llamado"),i(),n(8,"select",5),f("ngModelChange",function(t){return p(e.mesaExamen.llamado,t)||(e.mesaExamen.llamado=t),t}),x(9,Z,4,2,null,null,h),i()(),n(11,"div")(12,"label",4),s(13,"Turno"),i(),n(14,"select",6),f("ngModelChange",function(t){return p(e.mesaExamen.turno,t)||(e.mesaExamen.turno=t),t}),x(15,$,4,2,null,null,h),i()(),n(17,"div")(18,"label",4),s(19,"Fecha y Hora"),i(),n(20,"input",7),f("ngModelChange",function(t){return p(e.mesaExamen.fechaHora,t)||(e.mesaExamen.fechaHora=t),t}),i()()(),n(21,"div",8)(22,"div",9)(23,"label",4),s(24,"Carrera"),i(),n(25,"select",10),f("ngModelChange",function(t){return p(e.selectedCarreraId,t)||(e.selectedCarreraId=t),t}),S("change",function(){return e.onCarreraChange(e.selectedCarreraId)}),n(26,"option",11),s(27,"Seleccione una Carrera"),i(),w(28,ee,2,2,"option",12),i()(),n(29,"div",9)(30,"label",4),s(31,"Asignatura"),i(),n(32,"select",13),f("ngModelChange",function(t){return p(e.mesaExamen.asignatura,t)||(e.mesaExamen.asignatura=t),t}),x(33,ne,4,4,null,null,h),i()()(),n(35,"div",9)(36,"label",4),s(37,"Presidente"),i(),n(38,"select",14),f("ngModelChange",function(t){return p(e.mesaExamen.presidente,t)||(e.mesaExamen.presidente=t),t}),x(39,ae,4,3,null,null,h),i()(),n(41,"div",8)(42,"div",9)(43,"label",4),s(44,"Vocal 1"),i(),n(45,"select",15),f("ngModelChange",function(t){return p(e.mesaExamen.vocal1,t)||(e.mesaExamen.vocal1=t),t}),x(46,te,4,3,null,null,h),i()(),n(48,"div",9)(49,"label",4),s(50,"Vocal 2"),i(),n(51,"select",16),f("ngModelChange",function(t){return p(e.mesaExamen.vocal2,t)||(e.mesaExamen.vocal2=t),t}),x(52,ie,4,3,null,null,h),i()()(),n(54,"div",17)(55,"button",18),s(56),i()()()()),d&2&&(r(8),g("ngModel",e.mesaExamen.llamado),r(),v(e.llamadoTurnos),r(5),g("ngModel",e.mesaExamen.turno),r(),v(e.turnos),r(5),g("ngModel",e.mesaExamen.fechaHora),r(5),g("ngModel",e.selectedCarreraId),r(3),u("ngForOf",e.carreras),r(4),g("ngModel",e.mesaExamen.asignatura),r(),v(e.asignaturas),r(5),g("ngModel",e.mesaExamen.presidente),r(),v(e.docentes),r(6),g("ngModel",e.mesaExamen.vocal1),r(),v(e.docentes),r(5),g("ngModel",e.mesaExamen.vocal2),r(),v(e.docentes),r(4),C(" ",e.modoEdicion?"Actualizar":"Crear",""))},dependencies:[N,z,L,q,H,j,V,D,A,U,k,R,B,W],styles:["main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{height:50px;color:#fff;text-align:center;margin-bottom:20px;font-size:30px;background-color:#4d44b5;border-radius:20px 20px 0 0}"]});let o=m;return o})();export{ve as MesasExamenComponent};
